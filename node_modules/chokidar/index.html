<!DOCTYPE html>
<html lang="en-US">
<head prefix="og:http://ogp.me/ns#">
  
  
  
  

  <meta charset="UTF-8"/>
  <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="alternate" type="application/atom+xml" title="Liam Cottle&#39;s Blog" href="https://blog.liamcottle.com/feed.xml"/>

  <!-- styles -->
  
  <link rel="stylesheet" href="/assets/css/main.css?v=1718708836">
  <link rel="stylesheet" href="/assets/css/syntax.css?v=1718708836">

  <!-- Primary Meta Tags -->
  <title>Chokidar - Liam Cottle&#39;s Blog</title>
  <meta name="title" content="Chokidar - Liam Cottle&#39;s Blog">
  <meta name="description" content="Rambles from a self taught Software Engineer">

  <!-- Favicons -->
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicon/favicon-180x180.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon/favicon-16x16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon/favicon-32x32.png">
  <link rel="manifest" href="/assets/site.webmanifest">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://blog.liamcottle.com/node_modules/chokidar/">
  <meta property="og:title" content="Chokidar - Liam Cottle&#39;s Blog">
  <meta property="og:description" content="Rambles from a self taught Software Engineer">
  <meta property="og:image" content="https://blog.liamcottle.com/assets/images/avatar.jpg">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://blog.liamcottle.com/node_modules/chokidar/">
  <meta property="twitter:title" content="Chokidar - Liam Cottle&#39;s Blog">
  <meta property="twitter:description" content="Rambles from a self taught Software Engineer">
  <meta property="twitter:image" content="https://blog.liamcottle.com/assets/images/avatar.jpg">

  <!-- theme -->
  <script>

    function prefersDarkTheme() {
      return localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches);
    }

    // set preferred theme (before page loads to avoid flicker)
    if(prefersDarkTheme()){
      document.documentElement.classList.add('dark');
    } else {
      document.documentElement.classList.remove('dark');
    }

  </script>

</head>

<body class="bg-theme">
<div class="flex">
  <div class="mx-auto w-full flex">
    <div class="w-full">
      <div class="fixed top-0 left-0 right-0 print:absolute">
    <nav class="shadow print:shadow-none dark:border-b dark:border-gray-600 print:border-b print:border-gray-200 bg-theme">
        <div class="max-w-3xl mx-auto px-6">
            <div class="relative flex justify-between h-16">
                <div class="flex-1 flex items-stretch justify-start">

                    <a href="https://blog.liamcottle.com" class="flex-shrink-0 flex items-center font-medium">
                        <img class="rounded-full w-8 h-8 mr-3" src="/assets/images/avatar.jpg">
                        <div>
                            <h1>Liam Cottle's Blog</h1>
                            
                            <h2 class="text-xs text-gray-600">🇳🇿 New Zealand</h2>
                            
                        </div>
                    </a>

                    <div class="ml-auto flex space-x-2 print:hidden">

                        <button id="theme-toggle" type="button" class="text-gray-500 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300 inline-flex items-center px-1 pt-1 text-sm font-medium">
                            <svg id="theme-toggle-dark-icon" class="w-5 h-5 hidden" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
                            </svg>
                            <svg id="theme-toggle-light-icon" class="w-5 h-5 hidden" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                <path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fill-rule="evenodd" clip-rule="evenodd"></path>
                            </svg>
                        </button>

                        <a href="/feed.xml" class="text-orange-500 hover:text-orange-600 dark:text-gray-400 dark:hover:text-gray-300 inline-flex items-center px-1 pt-1 text-sm font-medium">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M6 5c7.18 0 13 5.82 13 13M6 11a7 7 0 017 7m-6 0a1 1 0 11-2 0 1 1 0 012 0z" />
                            </svg>
                            <span class="hidden sm:block ml-2">Atom Feed</span>
                        </a>

                    </div>

                </div>
            </div>
        </div>
    </nav>
    
</div>
      <div class="max-w-3xl mx-auto p-6 mt-16">
        <h1 id="chokidar--">Chokidar <a href="https://github.com/paulmillr/chokidar"><img src="https://img.shields.io/npm/dw/chokidar.svg" alt="Weekly downloads" /></a> <a href="https://github.com/paulmillr/chokidar"><img src="https://img.shields.io/npm/dy/chokidar.svg" alt="Yearly downloads" /></a></h1>

<blockquote>
  <p>Minimal and efficient cross-platform file watching library</p>
</blockquote>

<p><a href="https://www.npmjs.com/package/chokidar"><img src="https://nodei.co/npm/chokidar.png" alt="NPM" /></a></p>

<h2 id="why">Why?</h2>

<p>Node.js <code class="language-plaintext highlighter-rouge">fs.watch</code>:</p>

<ul>
  <li>Doesn’t report filenames on MacOS.</li>
  <li>Doesn’t report events at all when using editors like Sublime on MacOS.</li>
  <li>Often reports events twice.</li>
  <li>Emits most changes as <code class="language-plaintext highlighter-rouge">rename</code>.</li>
  <li>Does not provide an easy way to recursively watch file trees.</li>
  <li>Does not support recursive watching on Linux.</li>
</ul>

<p>Node.js <code class="language-plaintext highlighter-rouge">fs.watchFile</code>:</p>

<ul>
  <li>Almost as bad at event handling.</li>
  <li>Also does not provide any recursive watching.</li>
  <li>Results in high CPU utilization.</li>
</ul>

<p>Chokidar resolves these problems.</p>

<p>Initially made for <strong><a href="https://brunch.io/">Brunch</a></strong> (an ultra-swift web app build tool), it is now used in
<a href="https://github.com/microsoft/vscode">Microsoft’s Visual Studio Code</a>,
<a href="https://github.com/gulpjs/gulp/">gulp</a>,
<a href="https://karma-runner.github.io/">karma</a>,
<a href="https://github.com/Unitech/PM2">PM2</a>,
<a href="http://browserify.org/">browserify</a>,
<a href="https://webpack.github.io/">webpack</a>,
<a href="https://www.browsersync.io/">BrowserSync</a>,
and <a href="https://www.npmjs.com/browse/depended/chokidar">many others</a>.
It has proven itself in production environments.</p>

<p>Version 3 is out! Check out our blog post about it: <a href="https://paulmillr.com/posts/chokidar-3-save-32tb-of-traffic/">Chokidar 3: How to save 32TB of traffic every week</a></p>

<h2 id="how">How?</h2>

<p>Chokidar does still rely on the Node.js core <code class="language-plaintext highlighter-rouge">fs</code> module, but when using
<code class="language-plaintext highlighter-rouge">fs.watch</code> and <code class="language-plaintext highlighter-rouge">fs.watchFile</code> for watching, it normalizes the events it
receives, often checking for truth by getting file stats and/or dir contents.</p>

<p>On MacOS, chokidar by default uses a native extension exposing the Darwin
<code class="language-plaintext highlighter-rouge">FSEvents</code> API. This provides very efficient recursive watching compared with
implementations like <code class="language-plaintext highlighter-rouge">kqueue</code> available on most *nix platforms. Chokidar still
does have to do some work to normalize the events received that way as well.</p>

<p>On most other platforms, the <code class="language-plaintext highlighter-rouge">fs.watch</code>-based implementation is the default, which
avoids polling and keeps CPU usage down. Be advised that chokidar will initiate
watchers recursively for everything within scope of the paths that have been
specified, so be judicious about not wasting system resources by watching much
more than needed.</p>

<h2 id="getting-started">Getting started</h2>

<p>Install with npm:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install </span>chokidar
</code></pre></div></div>

<p>Then <code class="language-plaintext highlighter-rouge">require</code> and use it in your code:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">chokidar</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">chokidar</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// One-liner for current directory</span>
<span class="nx">chokidar</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="dl">'</span><span class="s1">.</span><span class="dl">'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">all</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">path</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">path</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="api">API</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Example of a more typical implementation structure</span>

<span class="c1">// Initialize watcher.</span>
<span class="kd">const</span> <span class="nx">watcher</span> <span class="o">=</span> <span class="nx">chokidar</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="dl">'</span><span class="s1">file, dir, glob, or array</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">ignored</span><span class="p">:</span> <span class="sr">/</span><span class="se">(</span><span class="sr">^|</span><span class="se">[\/\\])\.</span><span class="sr">./</span><span class="p">,</span> <span class="c1">// ignore dotfiles</span>
  <span class="na">persistent</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">});</span>

<span class="c1">// Something to use when events are received.</span>
<span class="kd">const</span> <span class="nx">log</span> <span class="o">=</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">console</span><span class="p">);</span>
<span class="c1">// Add event listeners.</span>
<span class="nx">watcher</span>
  <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">add</span><span class="dl">'</span><span class="p">,</span> <span class="nx">path</span> <span class="o">=&gt;</span> <span class="nx">log</span><span class="p">(</span><span class="s2">`File </span><span class="p">${</span><span class="nx">path</span><span class="p">}</span><span class="s2"> has been added`</span><span class="p">))</span>
  <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">change</span><span class="dl">'</span><span class="p">,</span> <span class="nx">path</span> <span class="o">=&gt;</span> <span class="nx">log</span><span class="p">(</span><span class="s2">`File </span><span class="p">${</span><span class="nx">path</span><span class="p">}</span><span class="s2"> has been changed`</span><span class="p">))</span>
  <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">unlink</span><span class="dl">'</span><span class="p">,</span> <span class="nx">path</span> <span class="o">=&gt;</span> <span class="nx">log</span><span class="p">(</span><span class="s2">`File </span><span class="p">${</span><span class="nx">path</span><span class="p">}</span><span class="s2"> has been removed`</span><span class="p">));</span>

<span class="c1">// More possible events.</span>
<span class="nx">watcher</span>
  <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">addDir</span><span class="dl">'</span><span class="p">,</span> <span class="nx">path</span> <span class="o">=&gt;</span> <span class="nx">log</span><span class="p">(</span><span class="s2">`Directory </span><span class="p">${</span><span class="nx">path</span><span class="p">}</span><span class="s2"> has been added`</span><span class="p">))</span>
  <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">unlinkDir</span><span class="dl">'</span><span class="p">,</span> <span class="nx">path</span> <span class="o">=&gt;</span> <span class="nx">log</span><span class="p">(</span><span class="s2">`Directory </span><span class="p">${</span><span class="nx">path</span><span class="p">}</span><span class="s2"> has been removed`</span><span class="p">))</span>
  <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">log</span><span class="p">(</span><span class="s2">`Watcher error: </span><span class="p">${</span><span class="nx">error</span><span class="p">}</span><span class="s2">`</span><span class="p">))</span>
  <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">ready</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Initial scan complete. Ready for changes</span><span class="dl">'</span><span class="p">))</span>
  <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">raw</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">path</span><span class="p">,</span> <span class="nx">details</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="c1">// internal</span>
    <span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Raw event info:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">path</span><span class="p">,</span> <span class="nx">details</span><span class="p">);</span>
  <span class="p">});</span>

<span class="c1">// 'add', 'addDir' and 'change' events also receive stat() results as second</span>
<span class="c1">// argument when available: https://nodejs.org/api/fs.html#fs_class_fs_stats</span>
<span class="nx">watcher</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">change</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="nx">stats</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">stats</span><span class="p">)</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`File </span><span class="p">${</span><span class="nx">path</span><span class="p">}</span><span class="s2"> changed size to </span><span class="p">${</span><span class="nx">stats</span><span class="p">.</span><span class="nx">size</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// Watch new files.</span>
<span class="nx">watcher</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="dl">'</span><span class="s1">new-file</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">watcher</span><span class="p">.</span><span class="nx">add</span><span class="p">([</span><span class="dl">'</span><span class="s1">new-file-2</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">new-file-3</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">**/other-file*</span><span class="dl">'</span><span class="p">]);</span>

<span class="c1">// Get list of actual paths being watched on the filesystem</span>
<span class="kd">var</span> <span class="nx">watchedPaths</span> <span class="o">=</span> <span class="nx">watcher</span><span class="p">.</span><span class="nx">getWatched</span><span class="p">();</span>

<span class="c1">// Un-watch some files.</span>
<span class="k">await</span> <span class="nx">watcher</span><span class="p">.</span><span class="nx">unwatch</span><span class="p">(</span><span class="dl">'</span><span class="s1">new-file*</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// Stop watching.</span>
<span class="c1">// The method is async!</span>
<span class="nx">watcher</span><span class="p">.</span><span class="nx">close</span><span class="p">().</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">closed</span><span class="dl">'</span><span class="p">));</span>

<span class="c1">// Full list of options. See below for descriptions.</span>
<span class="c1">// Do not use this example!</span>
<span class="nx">chokidar</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="dl">'</span><span class="s1">file</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">persistent</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="na">ignored</span><span class="p">:</span> <span class="dl">'</span><span class="s1">*.txt</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">ignoreInitial</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="na">followSymlinks</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">cwd</span><span class="p">:</span> <span class="dl">'</span><span class="s1">.</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">disableGlobbing</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>

  <span class="na">usePolling</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="na">interval</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
  <span class="na">binaryInterval</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span>
  <span class="na">alwaysStat</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="na">depth</span><span class="p">:</span> <span class="mi">99</span><span class="p">,</span>
  <span class="na">awaitWriteFinish</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">stabilityThreshold</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span>
    <span class="na">pollInterval</span><span class="p">:</span> <span class="mi">100</span>
  <span class="p">},</span>

  <span class="na">ignorePermissionErrors</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="na">atomic</span><span class="p">:</span> <span class="kc">true</span> <span class="c1">// or a custom 'atomicity delay', in milliseconds (default 100)</span>
<span class="p">});</span>

</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">chokidar.watch(paths, [options])</code></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">paths</code> (string or array of strings). Paths to files, dirs to be watched
recursively, or glob patterns.
    <ul>
      <li>Note: globs must not contain windows separators (<code class="language-plaintext highlighter-rouge">\</code>),
  because that’s how they work by the standard —
  you’ll need to replace them with forward slashes (<code class="language-plaintext highlighter-rouge">/</code>).</li>
      <li>Note 2: for additional glob documentation, check out low-level
  library: <a href="https://github.com/micromatch/picomatch">picomatch</a>.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">options</code> (object) Options object as defined below:</li>
</ul>

<h4 id="persistence">Persistence</h4>

<ul>
  <li><code class="language-plaintext highlighter-rouge">persistent</code> (default: <code class="language-plaintext highlighter-rouge">true</code>). Indicates whether the process
should continue to run as long as files are being watched. If set to
<code class="language-plaintext highlighter-rouge">false</code> when using <code class="language-plaintext highlighter-rouge">fsevents</code> to watch, no more events will be emitted
after <code class="language-plaintext highlighter-rouge">ready</code>, even if the process continues to run.</li>
</ul>

<h4 id="path-filtering">Path filtering</h4>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ignored</code> (<a href="https://github.com/es128/anymatch">anymatch</a>-compatible definition)
Defines files/paths to be ignored. The whole relative or absolute path is
tested, not just filename. If a function with two arguments is provided, it
gets called twice per path - once with a single argument (the path), second
time with two arguments (the path and the
<a href="https://nodejs.org/api/fs.html#fs_class_fs_stats"><code class="language-plaintext highlighter-rouge">fs.Stats</code></a>
object of that path).</li>
  <li><code class="language-plaintext highlighter-rouge">ignoreInitial</code> (default: <code class="language-plaintext highlighter-rouge">false</code>). If set to <code class="language-plaintext highlighter-rouge">false</code> then <code class="language-plaintext highlighter-rouge">add</code>/<code class="language-plaintext highlighter-rouge">addDir</code> events are also emitted for matching paths while
instantiating the watching as chokidar discovers these file paths (before the <code class="language-plaintext highlighter-rouge">ready</code> event).</li>
  <li><code class="language-plaintext highlighter-rouge">followSymlinks</code> (default: <code class="language-plaintext highlighter-rouge">true</code>). When <code class="language-plaintext highlighter-rouge">false</code>, only the
symlinks themselves will be watched for changes instead of following
the link references and bubbling events through the link’s path.</li>
  <li><code class="language-plaintext highlighter-rouge">cwd</code> (no default). The base directory from which watch <code class="language-plaintext highlighter-rouge">paths</code> are to be
derived. Paths emitted with events will be relative to this.</li>
  <li><code class="language-plaintext highlighter-rouge">disableGlobbing</code> (default: <code class="language-plaintext highlighter-rouge">false</code>). If set to <code class="language-plaintext highlighter-rouge">true</code> then the strings passed to <code class="language-plaintext highlighter-rouge">.watch()</code> and <code class="language-plaintext highlighter-rouge">.add()</code> are treated as
literal path names, even if they look like globs.</li>
</ul>

<h4 id="performance">Performance</h4>

<ul>
  <li><code class="language-plaintext highlighter-rouge">usePolling</code> (default: <code class="language-plaintext highlighter-rouge">false</code>).
Whether to use fs.watchFile (backed by polling), or fs.watch. If polling
leads to high CPU utilization, consider setting this to <code class="language-plaintext highlighter-rouge">false</code>. It is
typically necessary to <strong>set this to <code class="language-plaintext highlighter-rouge">true</code> to successfully watch files over
a network</strong>, and it may be necessary to successfully watch files in other
non-standard situations. Setting to <code class="language-plaintext highlighter-rouge">true</code> explicitly on MacOS overrides the
<code class="language-plaintext highlighter-rouge">useFsEvents</code> default. You may also set the CHOKIDAR_USEPOLLING env variable
to true (1) or false (0) in order to override this option.</li>
  <li><em>Polling-specific settings</em> (effective when <code class="language-plaintext highlighter-rouge">usePolling: true</code>)
    <ul>
      <li><code class="language-plaintext highlighter-rouge">interval</code> (default: <code class="language-plaintext highlighter-rouge">100</code>). Interval of file system polling, in milliseconds. You may also
set the CHOKIDAR_INTERVAL env variable to override this option.</li>
      <li><code class="language-plaintext highlighter-rouge">binaryInterval</code> (default: <code class="language-plaintext highlighter-rouge">300</code>). Interval of file system
polling for binary files.
(<a href="https://github.com/sindresorhus/binary-extensions/blob/master/binary-extensions.json">see list of binary extensions</a>)</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">useFsEvents</code> (default: <code class="language-plaintext highlighter-rouge">true</code> on MacOS). Whether to use the
<code class="language-plaintext highlighter-rouge">fsevents</code> watching interface if available. When set to <code class="language-plaintext highlighter-rouge">true</code> explicitly
and <code class="language-plaintext highlighter-rouge">fsevents</code> is available this supercedes the <code class="language-plaintext highlighter-rouge">usePolling</code> setting. When
set to <code class="language-plaintext highlighter-rouge">false</code> on MacOS, <code class="language-plaintext highlighter-rouge">usePolling: true</code> becomes the default.</li>
  <li><code class="language-plaintext highlighter-rouge">alwaysStat</code> (default: <code class="language-plaintext highlighter-rouge">false</code>). If relying upon the
<a href="https://nodejs.org/api/fs.html#fs_class_fs_stats"><code class="language-plaintext highlighter-rouge">fs.Stats</code></a>
object that may get passed with <code class="language-plaintext highlighter-rouge">add</code>, <code class="language-plaintext highlighter-rouge">addDir</code>, and <code class="language-plaintext highlighter-rouge">change</code> events, set
this to <code class="language-plaintext highlighter-rouge">true</code> to ensure it is provided even in cases where it wasn’t
already available from the underlying watch events.</li>
  <li><code class="language-plaintext highlighter-rouge">depth</code> (default: <code class="language-plaintext highlighter-rouge">undefined</code>). If set, limits how many levels of
subdirectories will be traversed.</li>
  <li><code class="language-plaintext highlighter-rouge">awaitWriteFinish</code> (default: <code class="language-plaintext highlighter-rouge">false</code>).
By default, the <code class="language-plaintext highlighter-rouge">add</code> event will fire when a file first appears on disk, before
the entire file has been written. Furthermore, in some cases some <code class="language-plaintext highlighter-rouge">change</code>
events will be emitted while the file is being written. In some cases,
especially when watching for large files there will be a need to wait for the
write operation to finish before responding to a file creation or modification.
Setting <code class="language-plaintext highlighter-rouge">awaitWriteFinish</code> to <code class="language-plaintext highlighter-rouge">true</code> (or a truthy value) will poll file size,
holding its <code class="language-plaintext highlighter-rouge">add</code> and <code class="language-plaintext highlighter-rouge">change</code> events until the size does not change for a
configurable amount of time. The appropriate duration setting is heavily
dependent on the OS and hardware. For accurate detection this parameter should
be relatively high, making file watching much less responsive.
Use with caution.
    <ul>
      <li><em><code class="language-plaintext highlighter-rouge">options.awaitWriteFinish</code> can be set to an object in order to adjust
timing params:</em></li>
      <li><code class="language-plaintext highlighter-rouge">awaitWriteFinish.stabilityThreshold</code> (default: 2000). Amount of time in
milliseconds for a file size to remain constant before emitting its event.</li>
      <li><code class="language-plaintext highlighter-rouge">awaitWriteFinish.pollInterval</code> (default: 100). File size polling interval, in milliseconds.</li>
    </ul>
  </li>
</ul>

<h4 id="errors">Errors</h4>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ignorePermissionErrors</code> (default: <code class="language-plaintext highlighter-rouge">false</code>). Indicates whether to watch files
that don’t have read permissions if possible. If watching fails due to <code class="language-plaintext highlighter-rouge">EPERM</code>
or <code class="language-plaintext highlighter-rouge">EACCES</code> with this set to <code class="language-plaintext highlighter-rouge">true</code>, the errors will be suppressed silently.</li>
  <li><code class="language-plaintext highlighter-rouge">atomic</code> (default: <code class="language-plaintext highlighter-rouge">true</code> if <code class="language-plaintext highlighter-rouge">useFsEvents</code> and <code class="language-plaintext highlighter-rouge">usePolling</code> are <code class="language-plaintext highlighter-rouge">false</code>).
Automatically filters out artifacts that occur when using editors that use
“atomic writes” instead of writing directly to the source file. If a file is
re-added within 100 ms of being deleted, Chokidar emits a <code class="language-plaintext highlighter-rouge">change</code> event
rather than <code class="language-plaintext highlighter-rouge">unlink</code> then <code class="language-plaintext highlighter-rouge">add</code>. If the default of 100 ms does not work well
for you, you can override it by setting <code class="language-plaintext highlighter-rouge">atomic</code> to a custom value, in
milliseconds.</li>
</ul>

<h3 id="methods--events">Methods &amp; Events</h3>

<p><code class="language-plaintext highlighter-rouge">chokidar.watch()</code> produces an instance of <code class="language-plaintext highlighter-rouge">FSWatcher</code>. Methods of <code class="language-plaintext highlighter-rouge">FSWatcher</code>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">.add(path / paths)</code>: Add files, directories, or glob patterns for tracking.
Takes an array of strings or just one string.</li>
  <li><code class="language-plaintext highlighter-rouge">.on(event, callback)</code>: Listen for an FS event.
Available events: <code class="language-plaintext highlighter-rouge">add</code>, <code class="language-plaintext highlighter-rouge">addDir</code>, <code class="language-plaintext highlighter-rouge">change</code>, <code class="language-plaintext highlighter-rouge">unlink</code>, <code class="language-plaintext highlighter-rouge">unlinkDir</code>, <code class="language-plaintext highlighter-rouge">ready</code>,
<code class="language-plaintext highlighter-rouge">raw</code>, <code class="language-plaintext highlighter-rouge">error</code>.
Additionally <code class="language-plaintext highlighter-rouge">all</code> is available which gets emitted with the underlying event
name and path for every event other than <code class="language-plaintext highlighter-rouge">ready</code>, <code class="language-plaintext highlighter-rouge">raw</code>, and <code class="language-plaintext highlighter-rouge">error</code>.  <code class="language-plaintext highlighter-rouge">raw</code> is internal, use it carefully.</li>
  <li><code class="language-plaintext highlighter-rouge">.unwatch(path / paths)</code>: Stop watching files, directories, or glob patterns.
Takes an array of strings or just one string.</li>
  <li><code class="language-plaintext highlighter-rouge">.close()</code>: <strong>async</strong> Removes all listeners from watched files. Asynchronous, returns Promise. Use with <code class="language-plaintext highlighter-rouge">await</code> to ensure bugs don’t happen.</li>
  <li><code class="language-plaintext highlighter-rouge">.getWatched()</code>: Returns an object representing all the paths on the file
system being watched by this <code class="language-plaintext highlighter-rouge">FSWatcher</code> instance. The object’s keys are all the
directories (using absolute paths unless the <code class="language-plaintext highlighter-rouge">cwd</code> option was used), and the
values are arrays of the names of the items contained in each directory.</li>
</ul>

<h2 id="cli">CLI</h2>

<p>If you need a CLI interface for your file watching, check out
<a href="https://github.com/open-cli-tools/chokidar-cli">chokidar-cli</a>, allowing you to
execute a command on each change, or get a stdio stream of change events.</p>

<h2 id="install-troubleshooting">Install Troubleshooting</h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">npm WARN optional dep failed, continuing fsevents@n.n.n</code>
    <ul>
      <li>This message is normal part of how <code class="language-plaintext highlighter-rouge">npm</code> handles optional dependencies and is
not indicative of a problem. Even if accompanied by other related error messages,
Chokidar should function properly.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">TypeError: fsevents is not a constructor</code>
    <ul>
      <li>Update chokidar by doing <code class="language-plaintext highlighter-rouge">rm -rf node_modules package-lock.json yarn.lock &amp;&amp; npm install</code>, or update your dependency that uses chokidar.</li>
    </ul>
  </li>
  <li>Chokidar is producing <code class="language-plaintext highlighter-rouge">ENOSP</code> error on Linux, like this:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">bash: cannot set terminal process group (-1): Inappropriate ioctl for device bash: no job control in this shell</code>
<code class="language-plaintext highlighter-rouge">Error: watch /home/ ENOSPC</code></li>
      <li>This means Chokidar ran out of file handles and you’ll need to increase their count by executing the following command in Terminal:
<code class="language-plaintext highlighter-rouge">echo fs.inotify.max_user_watches=524288 | sudo tee -a /etc/sysctl.conf &amp;&amp; sudo sysctl -p</code></li>
    </ul>
  </li>
</ul>

<h2 id="changelog">Changelog</h2>

<p>For more detailed changelog, see <a href=".github/full_changelog.md"><code class="language-plaintext highlighter-rouge">full_changelog.md</code></a>.</p>
<ul>
  <li><strong>v3.5 (Jan 6, 2021):</strong> Support for ARM Macs with Apple Silicon. Fixes for deleted symlinks.</li>
  <li><strong>v3.4 (Apr 26, 2020):</strong> Support for directory-based symlinks. Fixes for macos file replacement.</li>
  <li><strong>v3.3 (Nov 2, 2019):</strong> <code class="language-plaintext highlighter-rouge">FSWatcher#close()</code> method became async. That fixes IO race conditions related to close method.</li>
  <li><strong>v3.2 (Oct 1, 2019):</strong> Improve Linux RAM usage by 50%. Race condition fixes. Windows glob fixes. Improve stability by using tight range of dependency versions.</li>
  <li><strong>v3.1 (Sep 16, 2019):</strong> dotfiles are no longer filtered out by default. Use <code class="language-plaintext highlighter-rouge">ignored</code> option if needed. Improve initial Linux scan time by 50%.</li>
  <li><strong>v3 (Apr 30, 2019):</strong> massive CPU &amp; RAM consumption improvements; reduces deps / package size by a factor of 17x and bumps Node.js requirement to v8.16 and higher.</li>
  <li><strong>v2 (Dec 29, 2017):</strong> Globs are now posix-style-only; without windows support. Tons of bugfixes.</li>
  <li><strong>v1 (Apr 7, 2015):</strong> Glob support, symlink support, tons of bugfixes. Node 0.8+ is supported</li>
  <li><strong>v0.1 (Apr 20, 2012):</strong> Initial release, extracted from <a href="https://github.com/brunch/brunch/blob/9847a065aea300da99bd0753f90354cde9de1261/src/helpers.coffee#L66">Brunch</a></li>
</ul>

<h2 id="also">Also</h2>

<p>Why was chokidar named this way? What’s the meaning behind it?</p>

<blockquote>
  <p>Chowkidar is a transliteration of a Hindi word meaning ‘watchman, gatekeeper’, चौकीदार. This ultimately comes from Sanskrit _ चतुष्क_ (crossway, quadrangle, consisting-of-four).</p>
</blockquote>

<h2 id="license">License</h2>

<p>MIT (c) Paul Miller (<a href="https://paulmillr.com">https://paulmillr.com</a>), see <a href="/node_modules/chokidar/LICENSE">LICENSE</a> file.</p>

      </div>
      <div class="bg-theme border-t border-gray-200 dark:border-gray-600">
    <div class="max-w-3xl flex flex-col mx-auto px-6 py-6">
        <div class="mx-auto print:hidden">

            
            <a href="https://twitter.com/liamcottle" data-toggle="tooltip" data-title="Twitter" class="raise inline-flex items-center p-1.5 border border-transparent text-xs font-medium rounded-full shadow-sm text-white bg-twitter focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-twitter">
                <svg role="img" class="w-4 h-4" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path fill="currentColor" d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                </svg>
            </a>
            

            
            <a href="https://github.com/liamcottle" data-toggle="tooltip" data-title="GitHub" class="raise inline-flex items-center p-1.5 border border-transparent text-xs font-medium rounded-full shadow-sm text-white bg-github focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-github">
                <svg role="img" class="w-4 h-4" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path fill="currentColor" d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/>
                </svg>
            </a>
            

            
            <a href="https://discord.gg/APQSQZNV7t" data-toggle="tooltip" data-title="Discord" class="raise inline-flex items-center p-1.5 border border-transparent text-xs font-medium rounded-full shadow-sm text-white bg-discord focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-discord">
                <svg role="img" class="w-4 h-4" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path fill="currentColor" d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"/>
                </svg>
            </a>
            

            
            <a href="https://www.linkedin.com/in/liamcottle/" data-toggle="tooltip" data-title="LinkedIn" class="raise inline-flex items-center p-1.5 border border-transparent text-xs font-medium rounded-full shadow-sm text-white bg-linkedin focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-linkedin">
                <svg role="img" class="w-4 h-4" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path fill="currentColor" d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                </svg>
            </a>
            

            
            <a href="https://paypal.me/liamcarncottle" data-toggle="tooltip" data-title="PayPal" class="raise inline-flex items-center p-1.5 border border-transparent text-xs font-medium rounded-full shadow-sm text-white bg-paypal focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-paypal">
                <svg role="img" class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 48 48">
                    <path fill="#fff" fill-opacity=".45" d="M16.13 39.115H8.367a1.041 1.041 0 0 1-1.026-1.2l5.234-33.176a1.279 1.279 0 0 1 1.261-1.079h13.335c6.315 0 10.909 4.592 10.8 10.157 3.735 1.95 5.915 5.91 5.234 10.247a12.548 12.548 0 0 1-12.39 10.62H26.89a1.275 1.275 0 0 0-1.261 1.08L23.87 46.9a1.276 1.276 0 0 1-1.262 1.079H15.94a1.04 1.04 0 0 1-1.026-1.199l1.215-7.664v-.002Z"/>
                    <path fill="#fff" fill-opacity=".45" d="M37.973 13.817a11.668 11.668 0 0 0-5.441-1.294H21.414a1.277 1.277 0 0 0-1.261 1.08l-2.098 13.293.006-.035a1.28 1.28 0 0 1 1.256-1.042h6.144a12.553 12.553 0 0 0 12.39-10.62c.071-.457.113-.92.122-1.382Z"/>
                    <path fill="#fff" d="M16.133 39.115H8.368a1.041 1.041 0 0 1-1.026-1.2l5.234-33.176a1.279 1.279 0 0 1 1.261-1.079h13.335c6.315 0 10.909 4.592 10.801 10.157a11.67 11.67 0 0 0-5.441-1.294H21.414a1.277 1.277 0 0 0-1.261 1.08l-2.098 13.293.006-.035-1.928 12.254Z"/>
                </svg>
            </a>
            

            
            <a href="https://liamcottle.com/contact" data-toggle="tooltip" data-title="Email" class="raise inline-flex items-center p-1.5 border border-transparent text-xs font-medium rounded-full shadow-sm text-white bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                </svg>
            </a>
            

        </div>
        <div class="flex flex-col mx-auto text-sm text-center mt-3 text-gray-400">
            <div>This work is licensed under the</div>
            <div class="mb-1">
                 <a class="link" rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0 International License</a>
            </div>
            <div>by <a class="link" rel="license" href="https://liamcottle.com">Liam Cottle</a></div>
        </div>
    </div>
</div>
    </div>
  </div>
</div>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-S3724X6D5M"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-S3724X6D5M');
</script>



<!-- Hitsteps TRACKING CODE - Manual 2024-05-15 - DO NOT CHANGE -->
<script type="text/javascript">(function(){var hstc=document.createElement('script'); hstc.src='https://edgecdn.dev/code?code=d3f1847a76c4933f532da4ae84a36a0be183b';hstc.async=true;var htssc = document.getElementsByTagName('script')[0];htssc.parentNode.insertBefore(hstc, htssc);})();
</script><noscript><a href="http://www.hitsteps.com/"><img src="//edgecdn.dev/code?mode=img&amp;code=d3f1847a76c4933f532da4ae84a36a0be183b" alt="web stats" width="1" height="1" />visitor activity monitoring</a></noscript>
<!-- Hitsteps TRACKING CODE - DO NOT CHANGE -->


<!-- tooltips -->
<script src="https://unpkg.com/@popperjs/core@2"></script>
<script src="https://unpkg.com/tippy.js@6"></script>
<script type="text/javascript">
    tippy('[data-toggle="tooltip"]', {
        content(element) {
            return element.getAttribute('data-title');
        },
    });
</script>

<!-- theme -->
<script type="text/javascript">

    var themeToggleButton = document.getElementById('theme-toggle');
    var themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
    var themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');

    function useLightTheme() {
        document.documentElement.classList.remove('dark');
        themeToggleDarkIcon.classList.remove('hidden');
        themeToggleLightIcon.classList.add('hidden');
        localStorage.setItem('theme', 'light');
    }

    function useDarkTheme() {
        document.documentElement.classList.add('dark');
        themeToggleDarkIcon.classList.add('hidden');
        themeToggleLightIcon.classList.remove('hidden');
        localStorage.setItem('theme', 'dark');
    }

    function toggleTheme() {
        if(prefersDarkTheme()){
            useLightTheme();
        } else {
            useDarkTheme();
        }
    }

    // toggle theme on click
    themeToggleButton.addEventListener('click', function() {
        toggleTheme();
    });

    // set preferred theme (after page loads to update button state)
    if(prefersDarkTheme()){
        useDarkTheme();
    } else {
        useLightTheme();
    }

    /* we want to force light theme when printing */

    var didChangeThemeForPrint = false;

    window.onbeforeprint = function() {
        if(prefersDarkTheme()){
            didChangeThemeForPrint = true;
            useLightTheme();
        }
    };

    window.onafterprint = function() {
        if(didChangeThemeForPrint){
            useDarkTheme();
            didChangeThemeForPrint = false;
        }
    };

</script>

<!-- scroll progress -->
<script>

    function getScrollPercentage() {
        var element = document.documentElement;
        var body = document.body;
        var scrollTop = 'scrollTop';
        var scrollHeight = 'scrollHeight';
        return (element[scrollTop]||body[scrollTop]) / ((element[scrollHeight]||body[scrollHeight]) - element.clientHeight) * 100;
    }

    document.addEventListener("scroll", function() {
        var progressBar = document.getElementById("progress-bar");
        if(progressBar){
            var scrollPercentage = getScrollPercentage();
            progressBar.style.width = scrollPercentage + "%";
        }
    });

</script>
</body>
</html>
