{%- for post in site.posts -%}

{%- capture current_year -%}{{ post.date | date: "%Y" }}{%- endcapture -%}

{%- unless current_year == previous_year -%}
<h2 class="text-2xl font-bold mb-3">{{ current_year }}</h2>
{%- assign previous_year = current_year -%}
{%- endunless -%}

<article class="my-4">
    <h3 class="w-full">
        <a href="{{ post.url }}">
            <div class="flex flex-col sm:flex-row">
                <div class="order-2 sm:order-1 sm:mr-1 underline underline-offset-4 font-medium text-gray-700 decoration-gray-300 hover:decoration-gray-500">{{ post.title | escape }}</div>
                <div class="order-1 sm:order-2 sm:ml-auto text-gray-500 whitespace-nowrap">{{ post.date | date: "%B %d, %Y" }}</div>
            </div>
        </a>
    </h3>
</article>

{%- endfor -%}